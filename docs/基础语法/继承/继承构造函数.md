# 继承构造函数

**继承构造函数** 允许派生类直接使用基类的构造函数，避免重复代码。

## 问题：传统方式的繁琐

```cpp
class Base {
public:
    Base(int x) : value(x) {}
    Base(int x, int y) : value(x + y) {}
    Base(const string& s) : value(s.length) {}

    int value;
};

class Derived : public Base {
public:
    // 传统方式必须手动转发每个构造函数
    Derived(int x) : Base(x) {}
    Derived(int x, int y) : Base(x, y) {}
    Derived(const string& s) : Base(s) {}

    void show() { cout << value << endl; }
};
```

## 解决方案：using 声明

```cpp
class Derived : public Base {
public:
    using Base::Base;   // 继承所有基类构造函数
    
    void show() { cout << value << endl; }
};

int main() {
    Derived d1(10);           // 调用 Base(int)
    Derived d2(1, 2);         // 调用 Base(int, int)
    Derived d3("hello");      // 调用 Base(string)
}
```

**工作原理**：使用 `using Base::Base;` 会生成以下构造函数

```cpp
Derived(int x) : Base(x) {}
Derived(int x, int y) : Base(x, y) {}
Derived(const string& s) : Base(s) {}
```

## 注意事项

### 默认构造函数

基类的默认构造函数不会被自动继承，需要显式声明或使用 `= default`：

```cpp
class Base {
public:
    Base() = default;
    Base(int x) : value(x) {}
    int value;
};

class Derived : public Base {
public:
    using Base::Base;  // 包含默认构造函数
};
```

### 不能继承特殊成员函数

以下不会自动继承：
- 复制构造函数
- 移动构造函数
- 赋值运算符
- 移动赋值运算符

```cpp
class Derived : public Base {
public:
    using Base::Base;

    Derived(const Derived&) = default;  // 需要手动声明
    Derived(Derived&&) = default;
    Derived& operator=(const Derived&) = default;
    Derived& operator=(Derived&&) = default;
};
```